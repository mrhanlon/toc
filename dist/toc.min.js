/*!
 * toc - jQuery Table of Contents Plugin
 * v0.3.4
 * http://projects.jga.me/toc/
 * copyright Greg Allen 2015
 * MIT License
*/
!function(a,b){b.fn.smoothScroller=function(c){c=b.extend({},b.fn.smoothScroller.defaults,c);var d=b(this),e=d.attr("id"),f=a.history&&a.history.pushState;return e.length&&f&&a.history.pushState(null,null,"#"+e),b(c.scrollEl).animate({scrollTop:d.offset().top-b(c.scrollEl).offset().top-c.offset},c.speed,c.ease).promise().done(function(){var a=d.attr("id");a.length&&!f&&(document.location.hash=a),d.trigger("smoothScrollerComplete")}),this},b.fn.smoothScroller.defaults={speed:400,ease:"swing",scrollEl:"body,html",offset:0},b("body").on("click","[data-smoothscroller]",function(a){a.preventDefault();var c=b(this).attr("href");0===c.indexOf("#")&&b(c).smoothScroller()})}(window,jQuery),function(a){var b={};a.fn.toc=function(b){var c,d=this,e=a.extend({},jQuery.fn.toc.defaults,b),f=a(e.container),g=a(e.selectors,f),h=e.activeClass,i=function(){var b=[];return g.each(function(c,d){var f=a(d);b.push(f.offset().top-e.highlightOffset)}),b},j=function(b,c){if(e.smoothScrolling&&"function"==typeof e.smoothScrolling){b.preventDefault();var f=a(b.target).attr("href");e.smoothScrolling(f,e,c)}a("li",d).removeClass(h),a(b.target).parent().addClass(h)},k=function(b){c&&clearTimeout(c),c=setTimeout(function(){for(var b,c=a(window).scrollTop(),f=a(window).height(),g=Number.MAX_VALUE,j=0,k=i(),l=0,m=k.length;m>l;l++){var n=Math.abs(k[l]-c);g>n&&k[l]<c+f&&(j=l,g=n)}a("li",d).removeClass(h),b=a("li:eq("+j+")",d).addClass(h),e.onHighlight(b)},50)};return e.highlightOnScroll&&(a(window).bind("scroll",k),k()),this.each(function(){var b=a(this),c=a(e.listType);g.each(function(d,f){var g=a(f),h=e.anchorName(d,f,e.prefix);if(f.id!==h){a("<span/>").attr("id",h).insertBefore(g)}var i=a("<a/>").text(e.headerText(d,f,g)).attr("href","#"+h).bind("click",function(c){a(window).unbind("scroll",k),j(c,function(){a(window).bind("scroll",k)}),b.trigger("selected",a(this).attr("href"))}),l=a("<li/>").addClass(e.itemClass(d,f,g,e.prefix)).append(i);c.append(l)}),b.html(c)})},jQuery.fn.toc.defaults={container:"body",listType:"<ul/>",selectors:"h1,h2,h3",smoothScrolling:function(b,c,d){a(b).smoothScroller({offset:c.scrollToOffset}).on("smoothScrollerComplete",function(){d()})},scrollToOffset:0,prefix:"toc",activeClass:"toc-active",onHighlight:function(){},highlightOnScroll:!0,highlightOffset:100,anchorName:function(c,d,e){if(d.id.length)return d.id;var f=a(d).text().replace(/[^a-z0-9]/gi," ").replace(/\s+/g,"-").toLowerCase();if(b[f]){for(var g=2;b[f+g];)g++;f=f+"-"+g}return b[f]=!0,e+"-"+f},headerText:function(a,b,c){return c.data("toc-title")||c.text()},itemClass:function(a,b,c,d){return d+"-"+c[0].tagName.toLowerCase()}}}(jQuery);